{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 23e72e3b8a4aa08ee791","webpack:///./src/controls/geolocation.js","webpack:///./src/index.js"],"names":["GeolocationControl","map","position","callback","navigator","geolocation","google","maps","ControlPosition","RIGHT_BOTTOM","userLocation","getSavedUserLocation","$icon","document","createElement","className","$element","classList","toggle","appendChild","event","addDomListener","e","preventDefault","add","getUserLocation","success","error","remove","controls","push","style","display","location","window","sessionStorage","getItem","split","LatLng","parseFloat","cb","getCurrentPosition","coords","latitude","longitude","setItem","lat","lng","err","cachedStyles","cachedIcons","GoogleMap","isResizing","isDraging","markers","currentMarker","initialZoom","parseInt","node","getAttribute","options","mapOptions","zoom","initialCenter","center","bounds","LatLngBounds","infoWindow","InfoWindow","theme","styles","base","utils","fetch","json","paths","assets","then","_loadMap","catch","ex","console","innerHTML","clearInstanceListeners","Map","geolocationControl","setCenter","geolocationControlZoom","setZoom","message","listenerFirstIdle","addDomListenerOnce","_firstIdleListener","listenerIdle","_idleListener","forEach","marker","addMarker","boundMarkers","addBoundMarker","listenerZoomChanged","_zoomChangedListener","listenerDragstart","_dragstartListener","listenerDragend","_dragendListener","listenerResize","addEventListener","_resizeListener","cachedIcon","markerOptions","iconUrl","Object","assign","defaultMarkerOptions","pin","anchorPoint","icon","Promise","resolve","reject","_loadMarker","image","Image","onload","markerWidth","naturalWidth","markerHeight","naturalHeight","markerWidthScaled","scaleIcon","markerHeightScaled","Point","url","size","Size","scaledSize","anchor","origin","src","markerPromise","addBound","Marker","content","addListener","_markerClickListener","panTo","open","extend","fitBounds","updateCenter","trigger","responsive","resetOnResize","resetCenter","resetZoom","getCenter","pos","pan","one","setContent","close","getPosition","draging","fn","rAF","resize","bind","features","Feature","defaultOptions","disableDefaultUI","scrollwheel","zoomControl","mapTypeControl","draggable"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC/DqBA,kB;AAEnB,gCAAYC,GAAZ,EAAmD;AAAA;;AAAA,UAAlCC,QAAkC,uEAAvB,IAAuB;AAAA,UAAjBC,QAAiB,uEAAN,IAAM;;AAAA;;AACjD,UAAI,CAACC,UAAUC,WAAf,EAA4B;;AAE5BH,iBAAWA,YAAYI,OAAOC,IAAP,CAAYC,eAAZ,CAA4BC,YAAnD;;AAEA,WAAKC,YAAL,GAAoB,KAAKC,oBAAL,EAApB;AACA,WAAKV,GAAL,GAAWA,GAAX;;AAEA,WAAKW,KAAL,GAAaC,SAASC,aAAT,CAAuB,KAAvB,CAAb;AACA,WAAKF,KAAL,CAAWG,SAAX,GAAuB,0BAAvB;;AAEA,WAAKC,QAAL,GAAgBH,SAASC,aAAT,CAAuB,KAAvB,CAAhB;AACA,WAAKE,QAAL,CAAcD,SAAd,GAA0B,qBAA1B;AACA,WAAKC,QAAL,CAAcC,SAAd,CAAwBC,MAAxB,CAA+B,SAA/B,EAA0C,CAAC,CAAC,KAAKR,YAAjD;;AAEA,WAAKM,QAAL,CAAcG,WAAd,CAA0B,KAAKP,KAA/B;;AAEAN,aAAOC,IAAP,CAAYa,KAAZ,CAAkBC,cAAlB,CAAiC,KAAKL,QAAtC,EAAgD,OAAhD,EAAyD,UAACM,CAAD,EAAO;AAC9DA,UAAEC,cAAF;AACA,cAAKP,QAAL,CAAcC,SAAd,CAAwBO,GAAxB,CAA4B,UAA5B;;AAEA,cAAKC,eAAL,CAAqB,UAACC,OAAD,EAAUxB,QAAV,EAAoByB,KAApB,EAA8B;AACjD,gBAAKX,QAAL,CAAcC,SAAd,CAAwBW,MAAxB,CAA+B,UAA/B;;AAEA,cAAIF,OAAJ,EAAa;AACX,kBAAKV,QAAL,CAAcC,SAAd,CAAwBO,GAAxB,CAA4B,SAA5B;AACD;;AAED,cAAIrB,QAAJ,EAAc;AACZA,qBAASuB,OAAT,EAAkBxB,QAAlB,EAA4ByB,KAA5B;AACD;AACF,SAVD;AAWD,OAfD,EAeG,KAfH;;AAiBA,WAAK1B,GAAL,CAAS4B,QAAT,CAAkB3B,QAAlB,EAA4B4B,IAA5B,CAAiC,KAAKd,QAAtC;AACD;;;;6BAEM;AACL,aAAKA,QAAL,CAAce,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACD;;;6BAEM;AACL,aAAKhB,QAAL,CAAce,KAAd,CAAoBC,OAApB,GAA8B,OAA9B;AACD;;;6CAEsB;AACrB,YAAIC,WAAWC,OAAOC,cAAP,CAAsBC,OAAtB,CAA8B,oBAA9B,CAAf;AACA,YAAI,CAACH,QAAL,EAAe,OAAO,IAAP;;AAEf,YAAI/B,WAAW+B,SAASI,KAAT,CAAe,GAAf,CAAf;;AAEA,eAAO,IAAI/B,OAAOC,IAAP,CAAY+B,MAAhB,CACLC,WAAWrC,SAAS,CAAT,CAAX,CADK,EAELqC,WAAWrC,SAAS,CAAT,CAAX,CAFK,CAAP;AAID;;;sCAEesC,E,EAAI;AAAA;;AAClB,YAAI,KAAK9B,YAAT,EAAuB;AACrB8B,aAAG,IAAH,EAAS,KAAK9B,YAAd,EAA4B,IAA5B;AACA,iBAAO,IAAP;AACD;;AAED,YAAIN,UAAUC,WAAd,EAA2B;AACzBD,oBAAUC,WAAV,CAAsBoC,kBAAtB,CAAyC,UAACpC,WAAD,EAAiB;AACxD,gBAAIH,WAAW,IAAII,OAAOC,IAAP,CAAY+B,MAAhB,CACbjC,YAAYqC,MAAZ,CAAmBC,QADN,EACgBtC,YAAYqC,MAAZ,CAAmBE,SADnC,CAAf;;AAIA,mBAAKlC,YAAL,GAAoBR,QAApB;;AAEAgC,mBAAOC,cAAP,CAAsBU,OAAtB,CACE,oBADF,EACwB3C,SAAS4C,GAAT,KAAgB,GAAhB,GAAqB5C,SAAS6C,GAAT,EAD7C;;AAIAP,eAAG,IAAH,EAAStC,QAAT;AACD,WAZD,EAYG,UAAC8C,GAAD,EAAS;AACVR,eAAG,KAAH,EAAU,IAAV,EAAgBQ,GAAhB;AACD,WAdD;AAeD,SAhBD,MAgBO;AACLR,aAAG,KAAH,EAAU,IAAV;AACD;AACF;;;;;;oBApFkBxC,kB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCrB,MAAIiD,eAAe,EAAnB;AACA,MAAIC,cAAc,EAAlB;;AAEA;;;;MAGMC,S;;;;;;;;;;;6BAEG;AAAA;;AAEL,aAAKC,UAAL,GAAkB,KAAlB;AACA,aAAKC,SAAL,GAAiB,KAAjB;;AAEA,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKC,aAAL,GAAqB,IAArB;;AAEA,aAAKC,WAAL,GAAmBC,SAAS,KAAKC,IAAL,CAAUC,YAAV,CAAuB,WAAvB,CAAT,EAA8C,EAA9C,KAAqD,KAAKC,OAAL,CAAaC,UAAb,CAAwBC,IAAhG;AACA,aAAKC,aAAL,GAAqB;AACnBjB,eAAKP,WAAW,KAAKmB,IAAL,CAAUC,YAAV,CAAuB,UAAvB,CAAX,CADc;AAEnBZ,eAAKR,WAAW,KAAKmB,IAAL,CAAUC,YAAV,CAAuB,UAAvB,CAAX;AAFc,SAArB;;AAKA,aAAKK,MAAL,GAAc,KAAKD,aAAnB;AACA,aAAKE,MAAL,GAAc,IAAI3D,OAAOC,IAAP,CAAY2D,YAAhB,EAAd;AACA,aAAKC,UAAL,GAAkB,IAAI7D,OAAOC,IAAP,CAAY6D,UAAhB,EAAlB;;AAEA,aAAKR,OAAL,CAAaC,UAAb,CAAwBC,IAAxB,GAA+B,KAAKN,WAApC;AACA,aAAKI,OAAL,CAAaC,UAAb,CAAwBG,MAAxB,GAAiC,KAAKD,aAAtC;;AAEA,YAAIhC,QAAQkB,aAAa,KAAKW,OAAL,CAAaS,KAA1B,KAAoC,IAAhD;;AAEA,YAAI,CAAC,KAAKT,OAAL,CAAaC,UAAb,CAAwBS,MAA7B,EAAqC;AACnC,cAAI,CAACvC,KAAL,EAAY;AACVwC,iBAAKC,KAAL,CAAWC,KAAX,CACCC,IADD,CACSH,KAAKI,KAAL,CAAWC,MADpB,6BACkD,KAAKhB,OAAL,CAAaS,KAD/D,YAECQ,IAFD,CAEM,UAACH,IAAD,EAAU;AACd;AACAzB,2BAAa,OAAKW,OAAL,CAAaS,KAA1B,IAAmCK,IAAnC;AACA;AACA,qBAAKd,OAAL,CAAaC,UAAb,CAAwBS,MAAxB,GAAiCI,IAAjC;AACA,qBAAKI,QAAL;AACD,aARD,EAQGC,KARH,CAQS,UAACC,EAAD,EAAQ;AACfC,sBAAQtD,KAAR,8BAAyC,OAAKiC,OAAL,CAAaS,KAAtD,eAAuEW,EAAvE;AACD,aAVD;AAWD,WAZD,MAYO;AACL,iBAAKpB,OAAL,CAAaC,UAAb,CAAwBS,MAAxB,GAAiCvC,KAAjC;AACD;AACF,SAhBD,MAgBO;AACL,eAAK+C,QAAL;AACD;AACF;;;gCAES;AACR,aAAKpB,IAAL,CAAUwB,SAAV,GAAsB,EAAtB;AACA5E,eAAOC,IAAP,CAAYa,KAAZ,CAAkB+D,sBAAlB,CAAyC,KAAKlF,GAA9C;AACA,aAAKA,GAAL,GAAW,IAAX;;AAEA;AACD;;;iCAEU;AAAA;;AACT;AACA,aAAKA,GAAL,GAAW,IAAIK,OAAOC,IAAP,CAAY6E,GAAhB,CAAoB,KAAK1B,IAAzB,EAA+B,KAAKE,OAAL,CAAaC,UAA5C,CAAX;;AAEA,YAAI,KAAKD,OAAL,CAAayB,kBAAjB,EAAqC;AACnC,eAAKA,kBAAL,GAA0B,0BAAuB,KAAKpF,GAA5B,EAAiC,IAAjC,EAAuC,UAACyB,OAAD,EAAUxB,QAAV,EAAoByB,KAApB,EAA8B;AAC7F,gBAAID,OAAJ,EAAa;AACX,qBAAKzB,GAAL,CAASqF,SAAT,CAAmBpF,QAAnB;AACA,kBAAI,OAAK0D,OAAL,CAAa2B,sBAAjB,EAAyC;AACvC,uBAAKtF,GAAL,CAASuF,OAAT,CAAiB,OAAK5B,OAAL,CAAa2B,sBAA9B;AACD;AACF,aALD,MAKO;AACL5D,sBAAQA,MAAM8D,OAAN,IAAiB9D,KAAzB;AACA,kBAAIA,SAAS,IAAb,EAAmB;AACjBsD,wBAAQtD,KAAR,sCAAiDA,KAAjD;AACD,eAFD,MAEO;AACLsD,wBAAQtD,KAAR,CAAc,gCAAd;AACD;AACF;AACF,WAdyB,CAA1B;AAeD;;AAED,aAAK+D,iBAAL,GAAyBpF,OAAOC,IAAP,CAAYa,KAAZ,CAAkBuE,kBAAlB,CAAqC,KAAK1F,GAA1C,EAA+C,MAA/C,EAAuD,KAAK2F,kBAAL,EAAvD,CAAzB;AACA,aAAKC,YAAL,GAAoBvF,OAAOC,IAAP,CAAYa,KAAZ,CAAkBC,cAAlB,CAAiC,KAAKpB,GAAtC,EAA2C,MAA3C,EAAmD,KAAK6F,aAAL,EAAnD,CAApB;;AAEA,aAAKlC,OAAL,CAAaN,OAAb,CAAqByC,OAArB,CAA6B,UAACC,MAAD,EAAY;AACvC,iBAAKC,SAAL,CAAeD,MAAf;AACD,SAFD;;AAIA,aAAKpC,OAAL,CAAasC,YAAb,CAA0BH,OAA1B,CAAkC,UAACC,MAAD,EAAY;AAC5C,iBAAKG,cAAL,CAAoBH,MAApB;AACD,SAFD;;AAIA,aAAKI,mBAAL,GAA2B9F,OAAOC,IAAP,CAAYa,KAAZ,CAAkBC,cAAlB,CAAiC,KAAKpB,GAAtC,EAA2C,cAA3C,EAA2D,KAAKoG,oBAAL,EAA3D,CAA3B;AACA,aAAKC,iBAAL,GAAyBhG,OAAOC,IAAP,CAAYa,KAAZ,CAAkBC,cAAlB,CAAiC,KAAKpB,GAAtC,EAA2C,WAA3C,EAAwD,KAAKsG,kBAAL,EAAxD,CAAzB;AACA,aAAKC,eAAL,GAAuBlG,OAAOC,IAAP,CAAYa,KAAZ,CAAkBC,cAAlB,CAAiC,KAAKpB,GAAtC,EAA2C,SAA3C,EAAsD,KAAKwG,gBAAL,EAAtD,CAAvB;AACA,aAAKC,cAAL,GAAsB,KAAKC,gBAAL,CAAsBzE,MAAtB,EAA8B,QAA9B,EAAwC,KAAK0E,eAAL,EAAxC,CAAtB;AACD;;;kCASuB;AAAA;;AAAA,YAAdhD,OAAc,uEAAJ,EAAI;;AACtB,YAAIiD,UAAJ;AACA,YAAIC,aAAJ;AACA,YAAIC,OAAJ;;AAEA;AACAD,wBAAgBE,OAAOC,MAAP,CAAc,EAAd,EAAkB9D,UAAU+D,oBAAV,CAA+BJ,aAAjD,EAAgElD,QAAQkD,aAAR,IAAyB,EAAzF,CAAhB;;AAEA;AACAlD,kBAAUoD,OAAOC,MAAP,CAAc,EAAd,EAAkB9D,UAAU+D,oBAA5B,EAAkDtD,OAAlD,CAAV;;AAEA;AACAkD,sBAAc7G,GAAd,GAAoB,KAAKA,GAAzB;;AAEA;AACA6G,sBAAc5G,QAAd,GAAyB4G,cAAc5G,QAAd,IAA0B,KAAK6D,aAAxD;;AAEA;AACAgD,kBAAaxC,KAAKI,KAAL,CAAWC,MAAxB,2BAAoDhB,QAAQuD,GAA5D;;AAEAN,qBAAa3D,YAAY6D,OAAZ,KAAwB,IAArC;;AAEA,YAAIF,UAAJ,EAAgB;AACdC,wBAAcM,WAAd,GAA4BP,WAAWO,WAAvC;AACAN,wBAAcO,IAAd,GAAqBR,WAAWQ,IAAhC;;AAEA,iBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAIxB,SAAS,OAAKyB,WAAL,CAAiBX,aAAjB,EAAgClD,OAAhC,CAAb;AACA2D,oBAAQvB,MAAR;AACD,WAHM,CAAP;AAID;;AAED,eAAO,IAAIsB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAIE,QAAQ,IAAIC,KAAJ,EAAZ;;AAEAD,gBAAME,MAAN,GAAe,YAAM;AACnB,gBAAIC,cAAcH,MAAMI,YAAxB;AACA,gBAAIC,eAAeL,MAAMM,aAAzB;AACA,gBAAIC,oBAAoBJ,cAAcjE,QAAQsE,SAA9C;AACA,gBAAIC,qBAAqBJ,eAAenE,QAAQsE,SAAhD;;AAEApB,0BAAcM,WAAd,GAA4B,IAAI9G,OAAOC,IAAP,CAAY6H,KAAhB,CAAsB,CAAtB,EAAyBD,qBAAqB,CAAC,CAA/C,CAA5B;;AAEArB,0BAAcO,IAAd,GAAqB,EAArB;AACAP,0BAAcO,IAAd,CAAmBgB,GAAnB,GAAyBtB,OAAzB;AACAD,0BAAcO,IAAd,CAAmBiB,IAAnB,GAA0B,IAAIhI,OAAOC,IAAP,CAAYgI,IAAhB,CAAqBV,WAArB,EAAkCE,YAAlC,CAA1B;AACAjB,0BAAcO,IAAd,CAAmBmB,UAAnB,GAAgC,IAAIlI,OAAOC,IAAP,CAAYgI,IAAhB,CAAqBN,iBAArB,EAAwCE,kBAAxC,CAAhC;AACArB,0BAAcO,IAAd,CAAmBoB,MAAnB,GAA4B,IAAInI,OAAOC,IAAP,CAAY6H,KAAhB,CAAsBH,oBAAoB,CAA1C,EAA6CE,kBAA7C,CAA5B;AACArB,0BAAcO,IAAd,CAAmBqB,MAAnB,GAA4B,IAAIpI,OAAOC,IAAP,CAAY6H,KAAhB,CAAsB,CAAtB,EAAyB,CAAzB,CAA5B;;AAEA;AACAlF,wBAAY6D,OAAZ,IAAuB;AACrBK,2BAAaN,cAAcM,WADN;AAErBC,oBAAMP,cAAcO;AAFC,aAAvB;;AAKA,gBAAIrB,SAAS,OAAKyB,WAAL,CAAiBX,aAAjB,EAAgClD,OAAhC,CAAb;AACA2D,oBAAQvB,MAAR;AACD,WAvBD;;AAyBA0B,gBAAMiB,GAAN,GAAY5B,OAAZ;AACD,SA7BM,CAAP;AA8BD;;;uCAQ4B;AAAA;;AAAA,YAAdnD,OAAc,uEAAJ,EAAI;;AAC3B,YAAIgF,gBAAgB,KAAK3C,SAAL,CAAerC,OAAf,CAApB;AACA,eAAOgF,cAAc/D,IAAd,CAAmB,UAACmB,MAAD,EAAY;AACpC,iBAAK6C,QAAL,CAAc7C,OAAO9F,QAArB;AACD,SAFM,CAAP;AAGD;;;kCAEW4G,a,EAAelD,O,EAAS;AAClC,YAAIoC,SAAS,IAAI1F,OAAOC,IAAP,CAAYuI,MAAhB,CAAuBhC,aAAvB,CAAb;;AAEA,YAAIlD,QAAQmF,OAAZ,EAAqB;AACnBzI,iBAAOC,IAAP,CAAYa,KAAZ,CAAkB4H,WAAlB,CACEhD,MADF,EACU,OADV,EACmB,KAAKiD,oBAAL,CAA0BjD,MAA1B,EAAkCpC,QAAQmF,OAA1C,EAAmDnF,QAAQsF,KAA3D,EAAkEtF,QAAQuF,IAA1E,CADnB;AAGD;;AAED,aAAK7F,OAAL,CAAaxB,IAAb,CAAkBkE,MAAlB;AACA,eAAOA,MAAP;AACD;;;+BAMQ9F,Q,EAAU;AACjB;AACA,aAAK+D,MAAL,CAAYmF,MAAZ,CAAmBlJ,QAAnB;AACA;AACA,aAAKD,GAAL,CAASoJ,SAAT,CAAmB,KAAKpF,MAAxB;AACA;AACA,aAAKqF,YAAL;AACD;;;+BAEQ;AACP;AACAhJ,eAAOC,IAAP,CAAYa,KAAZ,CAAkBmI,OAAlB,CAA0B,KAAKtJ,GAA/B,EAAoC,QAApC;;AAEA,YAAI,KAAK2D,OAAL,CAAa4F,UAAb,IAA2B,CAAC,KAAK5F,OAAL,CAAa6F,aAA7C,EAA4D;AAC1D;AACA,eAAKxJ,GAAL,CAASqF,SAAT,CAAmB,KAAKtB,MAAxB;AACD;;AAED,YAAI,KAAKJ,OAAL,CAAa6F,aAAjB,EAAgC;AAC9B,eAAKC,WAAL,CAAiB,IAAjB;AACA,eAAKC,SAAL;AACD;;AAED,aAAKvG,UAAL,GAAkB,KAAlB;AACA,aAAKmG,OAAL,CAAa,SAAb;AACD;;;qCAEc;AACb,aAAKvF,MAAL,GAAc,KAAK/D,GAAL,CAAS2J,SAAT,EAAd;AACD;;;uCAEgBC,G,EAAK;AACpB,aAAK5J,GAAL,CAASqF,SAAT,CAAmBuE,GAAnB;AACA,aAAK9F,aAAL,GAAqB8F,GAArB;AACD;;;qCAEc/F,I,EAAM;AACnB,aAAK7D,GAAL,CAASuF,OAAT,CAAiB1B,IAAjB;AACA,aAAKN,WAAL,GAAmBM,IAAnB;AACD;;;+BAEQ;AACP,aAAK7D,GAAL,CAASuF,OAAT,CAAiB,EAAE,KAAKvF,GAAL,CAAS6D,IAA5B;AACD;;;gCAES;AACR,aAAK7D,GAAL,CAASuF,OAAT,CAAiB,EAAE,KAAKvF,GAAL,CAAS6D,IAA5B;AACD;;;oCAEwB;AAAA,YAAbgG,GAAa,uEAAP,KAAO;;AACvB,YAAIA,GAAJ,EAAS;AACP,eAAK7J,GAAL,CAASiJ,KAAT,CAAe,KAAKnF,aAApB;AACD,SAFD,MAEO;AACL,eAAK9D,GAAL,CAASqF,SAAT,CAAmB,KAAKvB,aAAxB;AACD;AACF;;;kCAEW;AACV,aAAK9D,GAAL,CAASuF,OAAT,CAAiB,KAAKhC,WAAtB;AACD;;;2CAEoB;AAAA;;AACnB,eAAO,YAAM;AACX,iBAAK+F,OAAL,CAAa,WAAb;AACD,SAFD;AAGD;;;2CAEoBvD,M,EAAQ+C,O,EAASe,G,EAAKX,I,EAAM;AAAA;;AAC/C,YAAIA,IAAJ,EAAU;AACR,eAAKY,GAAL,CAAS,WAAT,EAAsB,YAAM;AAC1B,mBAAKxG,aAAL,GAAqByC,MAArB;AACA,mBAAK7B,UAAL,CAAgB6F,UAAhB,CAA2BjB,OAA3B;AACA,mBAAK5E,UAAL,CAAgBgF,IAAhB,CAAqB,OAAKlJ,GAA1B,EAA+B+F,MAA/B;AACD,WAJD;AAKD;;AAED,eAAO,YAAM;AACX,cAAI,OAAKzC,aAAL,IAAsByC,MAA1B,EAAkC;AAChC,mBAAKzC,aAAL,GAAqByC,MAArB;AACA,mBAAK7B,UAAL,CAAgB6F,UAAhB,CAA2BjB,OAA3B;AACA,mBAAK5E,UAAL,CAAgBgF,IAAhB,CAAqB,OAAKlJ,GAA1B,EAA+B+F,MAA/B;AACD,WAJD,MAIO;AACL,mBAAKzC,aAAL,GAAqB,IAArB;AACA,mBAAKY,UAAL,CAAgB8F,KAAhB;AACD;;AAED,cAAIH,GAAJ,EAAS;AACP,gBAAID,MAAM7D,OAAOkE,WAAP,EAAV;AACA,mBAAKjK,GAAL,CAASiJ,KAAT,CAAeW,GAAf;AACA,mBAAK7F,MAAL,GAAc6F,GAAd;AACD;AACF,SAfD;AAgBD;;;sCAEe;AAAA;;AACd,eAAO,UAACvI,CAAD,EAAO;AACZ,cAAI,CAAC,OAAK6I,OAAV,EAAmB;AACjB,mBAAKb,YAAL;AACD;;AAED,iBAAKC,OAAL,CAAa,MAAb;AACD,SAND;AAOD;;;6CAEsB;AAAA;;AACrB,eAAO,UAACjI,CAAD,EAAO;AACZ,iBAAKiI,OAAL,CAAa,aAAb;AACD,SAFD;AAGD;;;2CAEoB;AAAA;;AACnB,eAAO,UAACjI,CAAD,EAAO;AACZ,kBAAK+B,SAAL,GAAiB,IAAjB;AACA,kBAAKkG,OAAL,CAAa,WAAb;AACD,SAHD;AAID;;;yCAEkB;AAAA;;AACjB,eAAO,UAACjI,CAAD,EAAO;AACZ,kBAAK+B,SAAL,GAAiB,KAAjB;AACA,kBAAKkG,OAAL,CAAa,SAAb;AACD,SAHD;AAID;;;wCAEiB;AAAA;;AAChB,eAAO,UAACjI,CAAD,EAAO;AACZ,cAAI,CAAC,QAAK8B,UAAV,EAAsB;AACpB,oBAAKA,UAAL,GAAkB,IAAlB;AACAmB,iBAAKC,KAAL,CAAW4F,EAAX,CAAcC,GAAd,CAAkB,QAAKC,MAAL,CAAYC,IAAZ,SAAlB;AACD;AACF,SALD;AAMD;;;;IArUqBhG,KAAKiG,QAAL,CAAcC,O;;AAyUtC;;;;;;;;;;;;;;;;;AAiBAtH,YAAUuH,cAAV,GAA2B;AACzBrG,WAAO,SADkB;AAEzBf,aAAS,EAFgB;AAGzB4C,kBAAc,EAHW;AAIzBsD,gBAAY,IAJa;AAKzBC,mBAAe,KALU;AAMzBpE,wBAAoB,KANK;AAOzBE,4BAAwB,IAPC;AAQzB1B,gBAAY;AACVC,YAAM,EADI;AAEV6G,wBAAkB,IAFR;AAGVC,mBAAa,KAHH;AAIVC,mBAAa,IAJH;AAKVC,sBAAgB;AALN;AARa,GAA3B;;AAiBA3H,YAAU+D,oBAAV,GAAiC;AAC/BiC,UAAM,KADyB;AAE/BJ,aAAS,IAFsB;AAG/BG,WAAO,KAHwB;AAI/BhB,eAAW,GAJoB;AAK/Bf,SAAK,SAL0B;AAM/BL,mBAAe;AACbiE,iBAAW;AADE;AANgB,GAAjC;;oBAWe5H,S","file":"map.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"map\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"map\"] = factory();\n\telse\n\t\troot[\"map\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 23e72e3b8a4aa08ee791","\nexport default class GeolocationControl {\n\n  constructor(map, position = null, callback = null) {\n    if (!navigator.geolocation) return\n\n    position = position || google.maps.ControlPosition.RIGHT_BOTTOM\n\n    this.userLocation = this.getSavedUserLocation()\n    this.map = map\n\n    this.$icon = document.createElement('div')\n    this.$icon.className = 'geolocation-control-icon'\n\n    this.$element = document.createElement('div')\n    this.$element.className = 'geolocation-control'\n    this.$element.classList.toggle('-active', !!this.userLocation)\n\n    this.$element.appendChild(this.$icon)\n\n    google.maps.event.addDomListener(this.$element, 'click', (e) => {\n      e.preventDefault()\n      this.$element.classList.add('-pending')\n\n      this.getUserLocation((success, position, error) => {\n        this.$element.classList.remove('-pending')\n\n        if (success) {\n          this.$element.classList.add('-active')\n        }\n\n        if (callback) {\n          callback(success, position, error)\n        }\n      })\n    }, false)\n\n    this.map.controls[position].push(this.$element)\n  }\n\n  hide() {\n    this.$element.style.display = 'none'\n  }\n\n  show() {\n    this.$element.style.display = 'block'\n  }\n\n  getSavedUserLocation() {\n    var location = window.sessionStorage.getItem('gmap-user-location')\n    if (!location) return null\n\n    var position = location.split(',')\n\n    return new google.maps.LatLng(\n      parseFloat(position[0]),\n      parseFloat(position[1])\n    )\n  }\n\n  getUserLocation(cb) {\n    if (this.userLocation) {\n      cb(true, this.userLocation, null)\n      return true\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((geolocation) => {\n        let position = new google.maps.LatLng(\n          geolocation.coords.latitude, geolocation.coords.longitude\n        )\n\n        this.userLocation = position\n\n        window.sessionStorage.setItem(\n          'gmap-user-location', position.lat() +','+ position.lng()\n        )\n\n        cb(true, position)\n      }, (err) => {\n        cb(false, null, err)\n      })\n    } else {\n      cb(false, null, `Browser doesn't support geocoding`)\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/geolocation.js","import GeolocationControl from './controls/geolocation'\n\nvar cachedStyles = {}\nvar cachedIcons = {}\n\n/**\n * Map feature class.\n */\nclass GoogleMap extends base.features.Feature {\n\n  init() {\n\n    this.isResizing = false\n    this.isDraging = false\n\n    this.markers = []\n    this.currentMarker = null\n\n    this.initialZoom = parseInt(this.node.getAttribute('data-zoom'), 10) || this.options.mapOptions.zoom\n    this.initialCenter = {\n      lat: parseFloat(this.node.getAttribute('data-lat')),\n      lng: parseFloat(this.node.getAttribute('data-lng'))\n    }\n\n    this.center = this.initialCenter\n    this.bounds = new google.maps.LatLngBounds()\n    this.infoWindow = new google.maps.InfoWindow()\n\n    this.options.mapOptions.zoom = this.initialZoom\n    this.options.mapOptions.center = this.initialCenter\n\n    var style = cachedStyles[this.options.theme] || null\n\n    if (!this.options.mapOptions.styles) {\n      if (!style) {\n        base.utils.fetch\n        .json(`${base.paths.assets}/features/map/styles/${this.options.theme}.json`)\n        .then((json) => {\n          // cache style\n          cachedStyles[this.options.theme] = json\n          // take styles for map and load it\n          this.options.mapOptions.styles = json\n          this._loadMap()\n        }).catch((ex) => {\n          console.error(`Loading map with theme \"${this.options.theme}\" failed`, ex)\n        })\n      } else {\n        this.options.mapOptions.styles = style\n      }\n    } else {\n      this._loadMap()\n    }\n  }\n\n  destroy() {\n    this.node.innerHTML = ''\n    google.maps.event.clearInstanceListeners(this.map)\n    this.map = null\n\n    super.destroy()\n  }\n\n  _loadMap() {\n    // create a map object and specify the DOM element for display.\n    this.map = new google.maps.Map(this.node, this.options.mapOptions)\n\n    if (this.options.geolocationControl) {\n      this.geolocationControl = new GeolocationControl(this.map, null, (success, position, error) => {\n        if (success) {\n          this.map.setCenter(position)\n          if (this.options.geolocationControlZoom) {\n            this.map.setZoom(this.options.geolocationControlZoom)\n          }\n        } else {\n          error = error.message || error\n          if (error != null) {\n            console.error(`Failed to detect user location: ${error}`)\n          } else {\n            console.error('Failed to detect user location')\n          }\n        }\n      })\n    }\n\n    this.listenerFirstIdle = google.maps.event.addDomListenerOnce(this.map, 'idle', this._firstIdleListener())\n    this.listenerIdle = google.maps.event.addDomListener(this.map, 'idle', this._idleListener())\n\n    this.options.markers.forEach((marker) => {\n      this.addMarker(marker)\n    })\n\n    this.options.boundMarkers.forEach((marker) => {\n      this.addBoundMarker(marker)\n    })\n\n    this.listenerZoomChanged = google.maps.event.addDomListener(this.map, 'zoom_changed', this._zoomChangedListener())\n    this.listenerDragstart = google.maps.event.addDomListener(this.map, 'dragstart', this._dragstartListener())\n    this.listenerDragend = google.maps.event.addDomListener(this.map, 'dragend', this._dragendListener())\n    this.listenerResize = this.addEventListener(window, 'resize', this._resizeListener())\n  }\n\n\n  /**\n   * Adds a marker to the map with a optional info window.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addMarker(options = {}) {\n    var cachedIcon\n    var markerOptions\n    var iconUrl\n\n    // extend Google API marker options\n    markerOptions = Object.assign({}, GoogleMap.defaultMarkerOptions.markerOptions, options.markerOptions || {})\n\n    // extend marker options\n    options = Object.assign({}, GoogleMap.defaultMarkerOptions, options)\n\n    // set map the marker belongs to\n    markerOptions.map = this.map\n\n    // set position to map center position if no position given\n    markerOptions.position = markerOptions.position || this.initialCenter\n\n    // set full icon url\n    iconUrl = `${base.paths.assets}/features/map/pins/${options.pin}.png`\n\n    cachedIcon = cachedIcons[iconUrl] || null\n\n    if (cachedIcon) {\n      markerOptions.anchorPoint = cachedIcon.anchorPoint\n      markerOptions.icon = cachedIcon.icon\n\n      return new Promise((resolve, reject) => {\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      })\n    }\n\n    return new Promise((resolve, reject) => {\n      var image = new Image()\n\n      image.onload = () => {\n        var markerWidth = image.naturalWidth\n        var markerHeight = image.naturalHeight\n        var markerWidthScaled = markerWidth * options.scaleIcon\n        var markerHeightScaled = markerHeight * options.scaleIcon\n\n        markerOptions.anchorPoint = new google.maps.Point(0, markerHeightScaled / -1)\n\n        markerOptions.icon = {}\n        markerOptions.icon.url = iconUrl\n        markerOptions.icon.size = new google.maps.Size(markerWidth, markerHeight)\n        markerOptions.icon.scaledSize = new google.maps.Size(markerWidthScaled, markerHeightScaled)\n        markerOptions.icon.anchor = new google.maps.Point(markerWidthScaled / 2, markerHeightScaled)\n        markerOptions.icon.origin = new google.maps.Point(0, 0)\n\n        // cache icon data\n        cachedIcons[iconUrl] = {\n          anchorPoint: markerOptions.anchorPoint,\n          icon: markerOptions.icon\n        }\n\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      }\n\n      image.src = iconUrl\n    })\n  }\n\n  /**\n   * Adds a marker to the map with its position as boundary.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addBoundMarker(options = {}) {\n    var markerPromise = this.addMarker(options)\n    return markerPromise.then((marker) => {\n      this.addBound(marker.position)\n    })\n  }\n\n  _loadMarker(markerOptions, options) {\n    var marker = new google.maps.Marker(markerOptions)\n\n    if (options.content) {\n      google.maps.event.addListener(\n        marker, 'click', this._markerClickListener(marker, options.content, options.panTo, options.open)\n      )\n    }\n\n    this.markers.push(marker)\n    return marker\n  }\n\n  /**\n   * Adds a new boundary.\n   * @param {Object} position - The boundary position.\n   */\n  addBound(position) {\n    // extend bounds with new marker position\n    this.bounds.extend(position)\n    // fit map according to current bounds\n    this.map.fitBounds(this.bounds)\n    // update center position\n    this.updateCenter()\n  }\n\n  resize() {\n    // trigger resize\n    google.maps.event.trigger(this.map, 'resize')\n\n    if (this.options.responsive && !this.options.resetOnResize) {\n      // preserve the current center point\n      this.map.setCenter(this.center)\n    }\n\n    if (this.options.resetOnResize) {\n      this.resetCenter(true)\n      this.resetZoom()\n    }\n\n    this.isResizing = false\n    this.trigger('resized')\n  }\n\n  updateCenter() {\n    this.center = this.map.getCenter()\n  }\n\n  setInitialCenter(pos) {\n    this.map.setCenter(pos)\n    this.initialCenter = pos\n  }\n\n  setInitialZoom(zoom) {\n    this.map.setZoom(zoom)\n    this.initialZoom = zoom\n  }\n\n  zoomIn() {\n    this.map.setZoom(++this.map.zoom)\n  }\n\n  zoomOut() {\n    this.map.setZoom(--this.map.zoom)\n  }\n\n  resetCenter(pan = false) {\n    if (pan) {\n      this.map.panTo(this.initialCenter)\n    } else {\n      this.map.setCenter(this.initialCenter)\n    }\n  }\n\n  resetZoom() {\n    this.map.setZoom(this.initialZoom)\n  }\n\n  _firstIdleListener() {\n    return () => {\n      this.trigger('firstIdle')\n    }\n  }\n\n  _markerClickListener(marker, content, pan, open) {\n    if (open) {\n      this.one('firstIdle', () => {\n        this.currentMarker = marker\n        this.infoWindow.setContent(content)\n        this.infoWindow.open(this.map, marker)\n      })\n    }\n\n    return () => {\n      if (this.currentMarker != marker) {\n        this.currentMarker = marker\n        this.infoWindow.setContent(content)\n        this.infoWindow.open(this.map, marker)\n      } else {\n        this.currentMarker = null\n        this.infoWindow.close()\n      }\n\n      if (pan) {\n        var pos = marker.getPosition()\n        this.map.panTo(pos)\n        this.center = pos\n      }\n    }\n  }\n\n  _idleListener() {\n    return (e) => {\n      if (!this.draging) {\n        this.updateCenter()\n      }\n\n      this.trigger('idle')\n    }\n  }\n\n  _zoomChangedListener() {\n    return (e) => {\n      this.trigger('zoomChanged')\n    }\n  }\n\n  _dragstartListener() {\n    return (e) => {\n      this.isDraging = true\n      this.trigger('dragstart')\n    }\n  }\n\n  _dragendListener() {\n    return (e) => {\n      this.isDraging = false\n      this.trigger('dragend')\n    }\n  }\n\n  _resizeListener() {\n    return (e) => {\n      if (!this.isResizing) {\n        this.isResizing = true\n        base.utils.fn.rAF(this.resize.bind(this))\n      }\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n *\n * @type {Object}\n * @property {String} theme='default'\n *   Style theme used for map.\n * @property {Boolean} responsive=false\n *   Recenters map on resize.\n * @property {Boolean} resetOnResize=false\n *   Resets map to initial zoom and center on resize.\n * @property {Boolean} geolocationControl=false\n *   Adds a geolocation control.\n * @property {Number|null} geolocationControlZoom=null\n *   Zoom applied after geolocation click.\n * @property {Object} mapOptions\n *   Google Map API options for map instance.\n */\nGoogleMap.defaultOptions = {\n  theme: 'default',\n  markers: [],\n  boundMarkers: [],\n  responsive: true,\n  resetOnResize: false,\n  geolocationControl: false,\n  geolocationControlZoom: null,\n  mapOptions: {\n    zoom: 12,\n    disableDefaultUI: true,\n    scrollwheel: false,\n    zoomControl: true,\n    mapTypeControl: false\n  }\n}\n\nGoogleMap.defaultMarkerOptions = {\n  open: false,\n  content: null,\n  panTo: false,\n  scaleIcon: 0.5,\n  pin: 'default',\n  markerOptions: {\n    draggable: false\n  }\n}\n\nexport default GoogleMap\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}