{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6f3242d06daef6455b8a","webpack:///./src/controls/geolocation.js","webpack:///./src/index.js"],"names":["GeolocationControl","map","position","callback","navigator","geolocation","google","maps","ControlPosition","RIGHT_BOTTOM","userLocation","getSavedUserLocation","$icon","document","createElement","className","$element","classList","toggle","appendChild","event","addDomListener","e","preventDefault","add","getUserLocation","success","error","remove","controls","push","style","display","location","window","sessionStorage","getItem","split","LatLng","parseFloat","cb","getCurrentPosition","coords","latitude","longitude","setItem","lat","lng","err","cachedStyles","cachedIcons","GoogleMap","isResizing","markers","currentMarker","initialZoom","parseInt","node","getAttribute","options","mapOptions","zoom","initialCenter","center","bounds","LatLngBounds","infoWindow","InfoWindow","theme","styles","base","utils","fetch","json","paths","assets","then","_loadMap","catch","ex","console","innerHTML","clearInstanceListeners","Map","geolocationControl","setCenter","geolocationControlZoom","setZoom","message","listenerFirstIdle","addDomListenerOnce","_firstIdleListener","forEach","marker","addMarker","boundMarkers","addBoundMarker","listenerZoomChanged","_zoomChangedListener","listenerDragend","_dragendListener","listenerResize","addEventListener","_resizeListener","cachedIcon","markerOptions","iconUrl","Object","assign","defaultMarkerOptions","pin","anchorPoint","icon","Promise","resolve","reject","_loadMarker","image","Image","onload","markerWidth","naturalWidth","markerHeight","naturalHeight","markerWidthScaled","scaleIcon","markerHeightScaled","Point","url","size","Size","scaledSize","anchor","origin","src","markerPromise","addBound","Marker","content","addListener","_markerClickListener","panTo","open","extend","fitBounds","updateCenter","trigger","responsive","resetOnResize","resetCenter","resetZoom","getCenter","pos","pan","setContent","addListenerOnce","bind","close","getPosition","fn","rAF","resize","features","Feature","defaultOptions","disableDefaultUI","scrollwheel","zoomControl","mapTypeControl","draggable"],"mappings":"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","file":"map.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"map\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"map\"] = factory();\n\telse\n\t\troot[\"map\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6f3242d06daef6455b8a","\nexport default class GeolocationControl {\n\n  constructor(map, position = null, callback = null) {\n    if (!navigator.geolocation) return\n\n    position = position || google.maps.ControlPosition.RIGHT_BOTTOM\n\n    this.userLocation = this.getSavedUserLocation()\n    this.map = map\n\n    this.$icon = document.createElement('div')\n    this.$icon.className = 'geolocation-control-icon'\n\n    this.$element = document.createElement('div')\n    this.$element.className = 'geolocation-control'\n    this.$element.classList.toggle('-active', !!this.userLocation)\n\n    this.$element.appendChild(this.$icon)\n\n    google.maps.event.addDomListener(this.$element, 'click', (e) => {\n      e.preventDefault()\n      this.$element.classList.add('-pending')\n\n      this.getUserLocation((success, position, error) => {\n        this.$element.classList.remove('-pending')\n\n        if (success) {\n          this.$element.classList.add('-active')\n        }\n\n        if (callback) {\n          callback(success, position, error)\n        }\n      })\n    }, false)\n\n    this.map.controls[position].push(this.$element)\n  }\n\n  hide() {\n    this.$element.style.display = 'none'\n  }\n\n  show() {\n    this.$element.style.display = 'block'\n  }\n\n  getSavedUserLocation() {\n    var location = window.sessionStorage.getItem('gmap-user-location')\n    if (!location) return null\n\n    var position = location.split(',')\n\n    return new google.maps.LatLng(\n      parseFloat(position[0]),\n      parseFloat(position[1])\n    )\n  }\n\n  getUserLocation(cb) {\n    if (this.userLocation) {\n      cb(true, this.userLocation, null)\n      return true\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((geolocation) => {\n        let position = new google.maps.LatLng(\n          geolocation.coords.latitude, geolocation.coords.longitude\n        )\n\n        this.userLocation = position\n\n        window.sessionStorage.setItem(\n          'gmap-user-location', position.lat() +','+ position.lng()\n        )\n\n        cb(true, position)\n      }, (err) => {\n        cb(false, null, err)\n      })\n    } else {\n      cb(false, null, `Browser doesn't support geocoding`)\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/geolocation.js","import GeolocationControl from './controls/geolocation'\n\nvar cachedStyles = {}\nvar cachedIcons = {}\n\n/**\n * Map feature class.\n */\nclass GoogleMap extends base.features.Feature {\n\n  init() {\n\n    this.isResizing = false\n\n    this.markers = []\n    this.currentMarker = null\n\n    this.initialZoom = parseInt(this.node.getAttribute('data-zoom'), 10) || this.options.mapOptions.zoom\n    this.initialCenter = {\n      lat: parseFloat(this.node.getAttribute('data-lat')),\n      lng: parseFloat(this.node.getAttribute('data-lng'))\n    }\n\n    this.center = this.initialCenter\n    this.bounds = new google.maps.LatLngBounds()\n    this.infoWindow = new google.maps.InfoWindow()\n\n    this.options.mapOptions.zoom = this.initialZoom\n    this.options.mapOptions.center = this.initialCenter\n\n    var style = cachedStyles[this.options.theme] || null\n\n    if (!this.options.mapOptions.styles) {\n      if (!style) {\n        base.utils.fetch\n        .json(`${base.paths.assets}/features/map/styles/${this.options.theme}.json`)\n        .then((json) => {\n          // cache style\n          cachedStyles[this.options.theme] = json\n          // take styles for map and load it\n          this.options.mapOptions.styles = json\n          this._loadMap()\n        }).catch((ex) => {\n          console.error(`Loading map with theme \"${this.options.theme}\" failed`, ex)\n        })\n      } else {\n        this.options.mapOptions.styles = style\n      }\n    } else {\n      this._loadMap()\n    }\n  }\n\n  destroy() {\n    this.node.innerHTML = ''\n    google.maps.event.clearInstanceListeners(this.map)\n    this.map = null\n\n    super.destroy()\n  }\n\n  _loadMap() {\n    // create a map object and specify the DOM element for display.\n    this.map = new google.maps.Map(this.node, this.options.mapOptions)\n\n    if (this.options.geolocationControl) {\n      this.geolocationControl = new GeolocationControl(this.map, null, (success, position, error) => {\n        if (success) {\n          this.map.setCenter(position)\n          if (this.options.geolocationControlZoom) {\n            this.map.setZoom(this.options.geolocationControlZoom)\n          }\n        } else {\n          error = error.message || error\n          if (error != null) {\n            console.error(`Failed to detect user location: ${error}`)\n          } else {\n            console.error('Failed to detect user location')\n          }\n        }\n      })\n    }\n\n    this.listenerFirstIdle = google.maps.event.addDomListenerOnce(this.map, 'idle', this._firstIdleListener())\n\n    this.options.markers.forEach((marker) => {\n      this.addMarker(marker)\n    })\n\n    this.options.boundMarkers.forEach((marker) => {\n      this.addBoundMarker(marker)\n    })\n\n    this.listenerZoomChanged = google.maps.event.addDomListener(this.map, 'zoom_changed', this._zoomChangedListener())\n    this.listenerDragend = google.maps.event.addDomListener(this.map, 'dragend', this._dragendListener())\n    this.listenerResize = this.addEventListener(window, 'resize', this._resizeListener())\n  }\n\n\n  /**\n   * Adds a marker to the map with a optional info window.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addMarker(options = {}) {\n    var cachedIcon\n    var markerOptions\n    var iconUrl\n\n    // extend Google API marker options\n    markerOptions = Object.assign({}, GoogleMap.defaultMarkerOptions.markerOptions, options.markerOptions || {})\n\n    // extend marker options\n    options = Object.assign({}, GoogleMap.defaultMarkerOptions, options)\n\n    // set map the marker belongs to\n    markerOptions.map = this.map\n\n    // set position to map center position if no position given\n    markerOptions.position = markerOptions.position || this.initialCenter\n\n    // set full icon url\n    iconUrl = `${base.paths.assets}/features/map/pins/${options.pin}.png`\n\n    cachedIcon = cachedIcons[iconUrl] || null\n\n    if (cachedIcon) {\n      markerOptions.anchorPoint = cachedIcon.anchorPoint\n      markerOptions.icon = cachedIcon.icon\n\n      return new Promise((resolve, reject) => {\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      })\n    }\n\n    return new Promise((resolve, reject) => {\n      var image = new Image()\n\n      image.onload = () => {\n        var markerWidth = image.naturalWidth\n        var markerHeight = image.naturalHeight\n        var markerWidthScaled = markerWidth * options.scaleIcon\n        var markerHeightScaled = markerHeight * options.scaleIcon\n\n        markerOptions.anchorPoint = new google.maps.Point(0, markerHeightScaled / -1)\n\n        markerOptions.icon = {}\n        markerOptions.icon.url = iconUrl\n        markerOptions.icon.size = new google.maps.Size(markerWidth, markerHeight)\n        markerOptions.icon.scaledSize = new google.maps.Size(markerWidthScaled, markerHeightScaled)\n        markerOptions.icon.anchor = new google.maps.Point(markerWidthScaled / 2, markerHeightScaled)\n        markerOptions.icon.origin = new google.maps.Point(0, 0)\n\n        // cache icon data\n        cachedIcons[iconUrl] = {\n          anchorPoint: markerOptions.anchorPoint,\n          icon: markerOptions.icon\n        }\n\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      }\n\n      image.src = iconUrl\n    })\n  }\n\n  /**\n   * Adds a marker to the map with its position as boundary.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addBoundMarker(options = {}) {\n    var markerPromise = this.addMarker(options)\n    return markerPromise.then((marker) => {\n      this.addBound(marker.position)\n    })\n  }\n\n  _loadMarker(markerOptions, options) {\n    var marker = new google.maps.Marker(markerOptions)\n\n    if (options.content) {\n      google.maps.event.addListener(\n        marker, 'click', this._markerClickListener(marker, options.content, options.panTo, options.open)\n      )\n    }\n\n    this.markers.push(marker)\n    return marker\n  }\n\n  /**\n   * Adds a new boundary.\n   * @param {Object} position - The boundary position.\n   */\n  addBound(position) {\n    // extend bounds with new marker position\n    this.bounds.extend(position)\n    // fit map according to current bounds\n    this.map.fitBounds(this.bounds)\n    // update center position\n    this.updateCenter()\n  }\n\n  resize() {\n    // trigger resize\n    google.maps.event.trigger(this.map, 'resize')\n\n    if (this.options.responsive && !this.options.resetOnResize) {\n      // preserve the current center point\n      this.map.setCenter(this.center)\n    }\n\n    if (this.options.resetOnResize) {\n      this.resetCenter(true)\n      this.resetZoom()\n    }\n\n    this.isResizing = false\n    this.trigger('resized')\n  }\n\n  updateCenter() {\n    this.center = this.map.getCenter()\n  }\n\n  setInitialCenter(pos) {\n    this.map.setCenter(pos)\n    this.initialCenter = pos\n  }\n\n  setInitialZoom(zoom) {\n    this.map.setZoom(zoom)\n    this.initialZoom = zoom\n  }\n\n  zoomIn() {\n    this.map.setZoom(++this.map.zoom)\n  }\n\n  zoomOut() {\n    this.map.setZoom(--this.map.zoom)\n  }\n\n  resetCenter(pan = false) {\n    if (pan) {\n      this.map.panTo(this.initialCenter)\n    } else {\n      this.map.setCenter(this.initialCenter)\n    }\n  }\n\n  resetZoom() {\n    this.map.setZoom(this.initialZoom)\n  }\n\n  _firstIdleListener() {\n    return () => {\n      this.trigger('firstIdle')\n    }\n  }\n\n  _markerClickListener(marker, content, pan, open) {\n    if (open) {\n      this.currentMarker = marker\n      this.infoWindow.setContent(content)\n      this.infoWindow.open(this.map, marker)\n    }\n\n    return () => {\n      google.maps.event.addListenerOnce(this.map, 'center_changed', this.updateCenter.bind(this))\n\n      if (this.currentMarker != marker) {\n        this.currentMarker = marker\n        this.infoWindow.setContent(content)\n        this.infoWindow.open(this.map, marker)\n      } else {\n        this.currentMarker = null\n        this.infoWindow.close()\n      }\n\n      if (pan) {\n        var pos = marker.getPosition()\n        this.map.panTo(pos)\n        this.center = pos\n      }\n    }\n  }\n\n  _zoomChangedListener() {\n    return (e) => {\n      this.updateCenter()\n      this.trigger('zoomChanged')\n    }\n  }\n\n  _dragendListener() {\n    return (e) => {\n      this.updateCenter()\n      this.trigger('dragend')\n    }\n  }\n\n  _resizeListener() {\n    return (e) => {\n      if (!this.isResizing) {\n        this.isResizing = true\n        base.utils.fn.rAF(this.resize.bind(this))\n      }\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n *\n * @type {Object}\n * @property {String} theme='default'\n *   Style theme used for map.\n * @property {Boolean} responsive=false\n *   Recenters map on resize.\n * @property {Boolean} resetOnResize=false\n *   Resets map to initial zoom and center on resize.\n * @property {Boolean} geolocationControl=false\n *   Adds a geolocation control.\n * @property {Number|null} geolocationControlZoom=null\n *   Zoom applied after geolocation click.\n * @property {Object} mapOptions\n *   Google Map API options for map instance.\n */\nGoogleMap.defaultOptions = {\n  theme: 'default',\n  markers: [],\n  boundMarkers: [],\n  responsive: true,\n  resetOnResize: false,\n  geolocationControl: false,\n  geolocationControlZoom: null,\n  mapOptions: {\n    zoom: 12,\n    disableDefaultUI: true,\n    scrollwheel: false,\n    zoomControl: true,\n    mapTypeControl: false\n  }\n}\n\nGoogleMap.defaultMarkerOptions = {\n  open: false,\n  content: null,\n  panTo: false,\n  scaleIcon: 0.5,\n  pin: 'default',\n  markerOptions: {\n    draggable: false\n  }\n}\n\nexport default GoogleMap\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}