{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///map.min.js","webpack:///webpack/bootstrap d5b1deb7c3da72d3821e","webpack:///./src/controls/geolocation.js","webpack:///./src/index.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","mod","apply","undefined","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","GeolocationControl","map","_this","position","arguments","callback","navigator","geolocation","google","maps","ControlPosition","RIGHT_BOTTOM","userLocation","getSavedUserLocation","$icon","document","createElement","className","$element","classList","toggle","appendChild","event","addDomListener","e","preventDefault","add","getUserLocation","success","error","remove","controls","push","hide","style","display","show","location","window","sessionStorage","getItem","split","LatLng","parseFloat","cb","_this2","getCurrentPosition","coords","latitude","longitude","setItem","lat","lng","err","default","_geolocation","_interopRequireDefault","obj","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_geolocation2","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","cachedStyles","cachedIcons","GoogleMap","_base$features$Featur","init","isResizing","markers","currentMarker","initialZoom","parseInt","node","getAttribute","options","mapOptions","zoom","initialCenter","center","bounds","LatLngBounds","infoWindow","InfoWindow","theme","styles","_loadMap","base","utils","fetch","json","paths","assets","then","catch","ex","console","destroy","innerHTML","clearInstanceListeners","_this3","Map","geolocationControl","setCenter","geolocationControlZoom","setZoom","message","listenerFirstIdle","addDomListenerOnce","_firstIdleListener","forEach","marker","addMarker","boundMarkers","addBoundMarker","listenerZoomChanged","_zoomChangedListener","listenerDragend","_dragendListener","listenerResize","addEventListener","_resizeListener","_this4","cachedIcon","markerOptions","iconUrl","assign","defaultMarkerOptions","pin","anchorPoint","icon","Promise","resolve","reject","_loadMarker","image","Image","onload","markerWidth","naturalWidth","markerHeight","naturalHeight","markerWidthScaled","scaleIcon","markerHeightScaled","Point","url","size","Size","scaledSize","anchor","origin","src","_this5","markerPromise","addBound","Marker","content","addListener","_markerClickListener","panTo","open","extend","fitBounds","updateCenter","resize","trigger","responsive","resetOnResize","resetCenter","resetZoom","getCenter","setInitialCenter","pos","setInitialZoom","zoomIn","zoomOut","pan","_this6","_this7","setContent","addListenerOnce","bind","close","getPosition","_this8","_this9","_this10","fn","rAF","features","Feature","defaultOptions","disableDefaultUI","scrollwheel","zoomControl","mapTypeControl","draggable"],"mappings":"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","file":"map.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"map\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"map\"] = factory();\n\telse\n\t\troot[\"map\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"map\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"map\"] = factory();\n\telse\n\t\troot[\"map\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.geolocation = mod.exports;\n  }\n})(this, function (exports) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var GeolocationControl = function () {\n    function GeolocationControl(map) {\n      var _this = this;\n\n      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      _classCallCheck(this, GeolocationControl);\n\n      if (!navigator.geolocation) return;\n\n      position = position || google.maps.ControlPosition.RIGHT_BOTTOM;\n\n      this.userLocation = this.getSavedUserLocation();\n      this.map = map;\n\n      this.$icon = document.createElement('div');\n      this.$icon.className = 'geolocation-control-icon';\n\n      this.$element = document.createElement('div');\n      this.$element.className = 'geolocation-control';\n      this.$element.classList.toggle('-active', !!this.userLocation);\n\n      this.$element.appendChild(this.$icon);\n\n      google.maps.event.addDomListener(this.$element, 'click', function (e) {\n        e.preventDefault();\n        _this.$element.classList.add('-pending');\n\n        _this.getUserLocation(function (success, position, error) {\n          _this.$element.classList.remove('-pending');\n\n          if (success) {\n            _this.$element.classList.add('-active');\n          }\n\n          if (callback) {\n            callback(success, position, error);\n          }\n        });\n      }, false);\n\n      this.map.controls[position].push(this.$element);\n    }\n\n    _createClass(GeolocationControl, [{\n      key: 'hide',\n      value: function hide() {\n        this.$element.style.display = 'none';\n      }\n    }, {\n      key: 'show',\n      value: function show() {\n        this.$element.style.display = 'block';\n      }\n    }, {\n      key: 'getSavedUserLocation',\n      value: function getSavedUserLocation() {\n        var location = window.sessionStorage.getItem('gmap-user-location');\n        if (!location) return null;\n\n        var position = location.split(',');\n\n        return new google.maps.LatLng(parseFloat(position[0]), parseFloat(position[1]));\n      }\n    }, {\n      key: 'getUserLocation',\n      value: function getUserLocation(cb) {\n        var _this2 = this;\n\n        if (this.userLocation) {\n          cb(true, this.userLocation, null);\n          return true;\n        }\n\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(function (geolocation) {\n            var position = new google.maps.LatLng(geolocation.coords.latitude, geolocation.coords.longitude);\n\n            _this2.userLocation = position;\n\n            window.sessionStorage.setItem('gmap-user-location', position.lat() + ',' + position.lng());\n\n            cb(true, position);\n          }, function (err) {\n            cb(false, null, err);\n          });\n        } else {\n          cb(false, null, 'Browser doesn\\'t support geocoding');\n        }\n      }\n    }]);\n\n    return GeolocationControl;\n  }();\n\n  exports.default = GeolocationControl;\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('./controls/geolocation'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.geolocation);\n    global.index = mod.exports;\n  }\n})(this, function (exports, _geolocation) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _geolocation2 = _interopRequireDefault(_geolocation);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  var _get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  };\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var cachedStyles = {};\n  var cachedIcons = {};\n\n  /**\n   * Map feature class.\n   */\n\n  var GoogleMap = function (_base$features$Featur) {\n    _inherits(GoogleMap, _base$features$Featur);\n\n    function GoogleMap() {\n      _classCallCheck(this, GoogleMap);\n\n      return _possibleConstructorReturn(this, (GoogleMap.__proto__ || Object.getPrototypeOf(GoogleMap)).apply(this, arguments));\n    }\n\n    _createClass(GoogleMap, [{\n      key: 'init',\n      value: function init() {\n        var _this2 = this;\n\n        this.isResizing = false;\n\n        this.markers = [];\n        this.currentMarker = null;\n\n        this.initialZoom = parseInt(this.node.getAttribute('data-zoom'), 10) || this.options.mapOptions.zoom;\n        this.initialCenter = {\n          lat: parseFloat(this.node.getAttribute('data-lat')),\n          lng: parseFloat(this.node.getAttribute('data-lng'))\n        };\n\n        this.center = this.initialCenter;\n        this.bounds = new google.maps.LatLngBounds();\n        this.infoWindow = new google.maps.InfoWindow();\n\n        this.options.mapOptions.zoom = this.initialZoom;\n        this.options.mapOptions.center = this.initialCenter;\n\n        var style = cachedStyles[this.options.theme] || null;\n\n        if (!this.options.mapOptions.styles) {\n          if (!style) {\n            base.utils.fetch.json(base.paths.assets + '/features/map/styles/' + this.options.theme + '.json').then(function (json) {\n              // cache style\n              cachedStyles[_this2.options.theme] = json;\n              // take styles for map and load it\n              _this2.options.mapOptions.styles = json;\n              _this2._loadMap();\n            }).catch(function (ex) {\n              console.error('Loading map with theme \"' + _this2.options.theme + '\" failed', ex);\n            });\n          } else {\n            this.options.mapOptions.styles = style;\n          }\n        } else {\n          this._loadMap();\n        }\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.node.innerHTML = '';\n        google.maps.event.clearInstanceListeners(this.map);\n        this.map = null;\n\n        _get(GoogleMap.prototype.__proto__ || Object.getPrototypeOf(GoogleMap.prototype), 'destroy', this).call(this);\n      }\n    }, {\n      key: '_loadMap',\n      value: function _loadMap() {\n        var _this3 = this;\n\n        // create a map object and specify the DOM element for display.\n        this.map = new google.maps.Map(this.node, this.options.mapOptions);\n\n        if (this.options.geolocationControl) {\n          this.geolocationControl = new _geolocation2.default(this.map, null, function (success, position, error) {\n            if (success) {\n              _this3.map.setCenter(position);\n              if (_this3.options.geolocationControlZoom) {\n                _this3.map.setZoom(_this3.options.geolocationControlZoom);\n              }\n            } else {\n              error = error.message || error;\n              if (error != null) {\n                console.error('Failed to detect user location: ' + error);\n              } else {\n                console.error('Failed to detect user location');\n              }\n            }\n          });\n        }\n\n        this.listenerFirstIdle = google.maps.event.addDomListenerOnce(this.map, 'idle', this._firstIdleListener());\n\n        this.options.markers.forEach(function (marker) {\n          _this3.addMarker(marker);\n        });\n\n        this.options.boundMarkers.forEach(function (marker) {\n          _this3.addBoundMarker(marker);\n        });\n\n        this.listenerZoomChanged = google.maps.event.addDomListener(this.map, 'zoom_changed', this._zoomChangedListener());\n        this.listenerDragend = google.maps.event.addDomListener(this.map, 'dragend', this._dragendListener());\n        this.listenerResize = this.addEventListener(window, 'resize', this._resizeListener());\n      }\n    }, {\n      key: 'addMarker',\n      value: function addMarker() {\n        var _this4 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var cachedIcon;\n        var markerOptions;\n        var iconUrl;\n\n        // extend Google API marker options\n        markerOptions = Object.assign({}, GoogleMap.defaultMarkerOptions.markerOptions, options.markerOptions || {});\n\n        // extend marker options\n        options = Object.assign({}, GoogleMap.defaultMarkerOptions, options);\n\n        // set map the marker belongs to\n        markerOptions.map = this.map;\n\n        // set position to map center position if no position given\n        markerOptions.position = markerOptions.position || this.initialCenter;\n\n        // set full icon url\n        iconUrl = base.paths.assets + '/features/map/pins/' + options.pin + '.png';\n\n        cachedIcon = cachedIcons[iconUrl] || null;\n\n        if (cachedIcon) {\n          markerOptions.anchorPoint = cachedIcon.anchorPoint;\n          markerOptions.icon = cachedIcon.icon;\n\n          return new Promise(function (resolve, reject) {\n            var marker = _this4._loadMarker(markerOptions, options);\n            resolve(marker);\n          });\n        }\n\n        return new Promise(function (resolve, reject) {\n          var image = new Image();\n\n          image.onload = function () {\n            var markerWidth = image.naturalWidth;\n            var markerHeight = image.naturalHeight;\n            var markerWidthScaled = markerWidth * options.scaleIcon;\n            var markerHeightScaled = markerHeight * options.scaleIcon;\n\n            markerOptions.anchorPoint = new google.maps.Point(0, markerHeightScaled / -1);\n\n            markerOptions.icon = {};\n            markerOptions.icon.url = iconUrl;\n            markerOptions.icon.size = new google.maps.Size(markerWidth, markerHeight);\n            markerOptions.icon.scaledSize = new google.maps.Size(markerWidthScaled, markerHeightScaled);\n            markerOptions.icon.anchor = new google.maps.Point(markerWidthScaled / 2, markerHeightScaled);\n            markerOptions.icon.origin = new google.maps.Point(0, 0);\n\n            // cache icon data\n            cachedIcons[iconUrl] = {\n              anchorPoint: markerOptions.anchorPoint,\n              icon: markerOptions.icon\n            };\n\n            var marker = _this4._loadMarker(markerOptions, options);\n            resolve(marker);\n          };\n\n          image.src = iconUrl;\n        });\n      }\n    }, {\n      key: 'addBoundMarker',\n      value: function addBoundMarker() {\n        var _this5 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var markerPromise = this.addMarker(options);\n        return markerPromise.then(function (marker) {\n          _this5.addBound(marker.position);\n        });\n      }\n    }, {\n      key: '_loadMarker',\n      value: function _loadMarker(markerOptions, options) {\n        var marker = new google.maps.Marker(markerOptions);\n\n        if (options.content) {\n          google.maps.event.addListener(marker, 'click', this._markerClickListener(marker, options.content, options.panTo, options.open));\n        }\n\n        this.markers.push(marker);\n        return marker;\n      }\n    }, {\n      key: 'addBound',\n      value: function addBound(position) {\n        // extend bounds with new marker position\n        this.bounds.extend(position);\n        // fit map according to current bounds\n        this.map.fitBounds(this.bounds);\n        // update center position\n        this.updateCenter();\n      }\n    }, {\n      key: 'resize',\n      value: function resize() {\n        // trigger resize\n        google.maps.event.trigger(this.map, 'resize');\n\n        if (this.options.responsive && !this.options.resetOnResize) {\n          // preserve the current center point\n          this.map.setCenter(this.center);\n        }\n\n        if (this.options.resetOnResize) {\n          this.resetCenter(true);\n          this.resetZoom();\n        }\n\n        this.isResizing = false;\n        this.trigger('resized');\n      }\n    }, {\n      key: 'updateCenter',\n      value: function updateCenter() {\n        this.center = this.map.getCenter();\n      }\n    }, {\n      key: 'setInitialCenter',\n      value: function setInitialCenter(pos) {\n        this.map.setCenter(pos);\n        this.initialCenter = pos;\n      }\n    }, {\n      key: 'setInitialZoom',\n      value: function setInitialZoom(zoom) {\n        this.map.setZoom(zoom);\n        this.initialZoom = zoom;\n      }\n    }, {\n      key: 'zoomIn',\n      value: function zoomIn() {\n        this.map.setZoom(++this.map.zoom);\n      }\n    }, {\n      key: 'zoomOut',\n      value: function zoomOut() {\n        this.map.setZoom(--this.map.zoom);\n      }\n    }, {\n      key: 'resetCenter',\n      value: function resetCenter() {\n        var pan = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        if (pan) {\n          this.map.panTo(this.initialCenter);\n        } else {\n          this.map.setCenter(this.initialCenter);\n        }\n      }\n    }, {\n      key: 'resetZoom',\n      value: function resetZoom() {\n        this.map.setZoom(this.initialZoom);\n      }\n    }, {\n      key: '_firstIdleListener',\n      value: function _firstIdleListener() {\n        var _this6 = this;\n\n        return function () {\n          _this6.trigger('firstIdle');\n        };\n      }\n    }, {\n      key: '_markerClickListener',\n      value: function _markerClickListener(marker, content, pan, open) {\n        var _this7 = this;\n\n        if (open) {\n          this.currentMarker = marker;\n          this.infoWindow.setContent(content);\n          this.infoWindow.open(this.map, marker);\n        }\n\n        return function () {\n          google.maps.event.addListenerOnce(_this7.map, 'center_changed', _this7.updateCenter.bind(_this7));\n\n          if (_this7.currentMarker != marker) {\n            _this7.currentMarker = marker;\n            _this7.infoWindow.setContent(content);\n            _this7.infoWindow.open(_this7.map, marker);\n          } else {\n            _this7.currentMarker = null;\n            _this7.infoWindow.close();\n          }\n\n          if (pan) {\n            var pos = marker.getPosition();\n            _this7.map.panTo(pos);\n            _this7.center = pos;\n          }\n        };\n      }\n    }, {\n      key: '_zoomChangedListener',\n      value: function _zoomChangedListener() {\n        var _this8 = this;\n\n        return function (e) {\n          _this8.updateCenter();\n          _this8.trigger('zoomChanged');\n        };\n      }\n    }, {\n      key: '_dragendListener',\n      value: function _dragendListener() {\n        var _this9 = this;\n\n        return function (e) {\n          _this9.updateCenter();\n          _this9.trigger('dragend');\n        };\n      }\n    }, {\n      key: '_resizeListener',\n      value: function _resizeListener() {\n        var _this10 = this;\n\n        return function (e) {\n          if (!_this10.isResizing) {\n            _this10.isResizing = true;\n            base.utils.fn.rAF(_this10.resize.bind(_this10));\n          }\n        };\n      }\n    }]);\n\n    return GoogleMap;\n  }(base.features.Feature);\n\n  /**\n   * Default feature options.\n   *\n   * @type {Object}\n   * @property {String} theme='default'\n   *   Style theme used for map.\n   * @property {Boolean} responsive=false\n   *   Recenters map on resize.\n   * @property {Boolean} resetOnResize=false\n   *   Resets map to initial zoom and center on resize.\n   * @property {Boolean} geolocationControl=false\n   *   Adds a geolocation control.\n   * @property {Number|null} geolocationControlZoom=null\n   *   Zoom applied after geolocation click.\n   * @property {Object} mapOptions\n   *   Google Map API options for map instance.\n   */\n  GoogleMap.defaultOptions = {\n    theme: 'default',\n    markers: [],\n    boundMarkers: [],\n    responsive: true,\n    resetOnResize: false,\n    geolocationControl: false,\n    geolocationControlZoom: null,\n    mapOptions: {\n      zoom: 12,\n      disableDefaultUI: true,\n      scrollwheel: false,\n      zoomControl: true,\n      mapTypeControl: false\n    }\n  };\n\n  GoogleMap.defaultMarkerOptions = {\n    open: false,\n    content: null,\n    panTo: false,\n    scaleIcon: 0.5,\n    pin: 'default',\n    markerOptions: {\n      draggable: false\n    }\n  };\n\n  exports.default = GoogleMap;\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// map.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d5b1deb7c3da72d3821e","\nexport default class GeolocationControl {\n\n  constructor(map, position = null, callback = null) {\n    if (!navigator.geolocation) return\n\n    position = position || google.maps.ControlPosition.RIGHT_BOTTOM\n\n    this.userLocation = this.getSavedUserLocation()\n    this.map = map\n\n    this.$icon = document.createElement('div')\n    this.$icon.className = 'geolocation-control-icon'\n\n    this.$element = document.createElement('div')\n    this.$element.className = 'geolocation-control'\n    this.$element.classList.toggle('-active', !!this.userLocation)\n\n    this.$element.appendChild(this.$icon)\n\n    google.maps.event.addDomListener(this.$element, 'click', (e) => {\n      e.preventDefault()\n      this.$element.classList.add('-pending')\n\n      this.getUserLocation((success, position, error) => {\n        this.$element.classList.remove('-pending')\n\n        if (success) {\n          this.$element.classList.add('-active')\n        }\n\n        if (callback) {\n          callback(success, position, error)\n        }\n      })\n    }, false)\n\n    this.map.controls[position].push(this.$element)\n  }\n\n  hide() {\n    this.$element.style.display = 'none'\n  }\n\n  show() {\n    this.$element.style.display = 'block'\n  }\n\n  getSavedUserLocation() {\n    var location = window.sessionStorage.getItem('gmap-user-location')\n    if (!location) return null\n\n    var position = location.split(',')\n\n    return new google.maps.LatLng(\n      parseFloat(position[0]),\n      parseFloat(position[1])\n    )\n  }\n\n  getUserLocation(cb) {\n    if (this.userLocation) {\n      cb(true, this.userLocation, null)\n      return true\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((geolocation) => {\n        let position = new google.maps.LatLng(\n          geolocation.coords.latitude, geolocation.coords.longitude\n        )\n\n        this.userLocation = position\n\n        window.sessionStorage.setItem(\n          'gmap-user-location', position.lat() +','+ position.lng()\n        )\n\n        cb(true, position)\n      }, (err) => {\n        cb(false, null, err)\n      })\n    } else {\n      cb(false, null, `Browser doesn't support geocoding`)\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/geolocation.js","import GeolocationControl from './controls/geolocation'\n\nvar cachedStyles = {}\nvar cachedIcons = {}\n\n/**\n * Map feature class.\n */\nclass GoogleMap extends base.features.Feature {\n\n  init() {\n\n    this.isResizing = false\n\n    this.markers = []\n    this.currentMarker = null\n\n    this.initialZoom = parseInt(this.node.getAttribute('data-zoom'), 10) || this.options.mapOptions.zoom\n    this.initialCenter = {\n      lat: parseFloat(this.node.getAttribute('data-lat')),\n      lng: parseFloat(this.node.getAttribute('data-lng'))\n    }\n\n    this.center = this.initialCenter\n    this.bounds = new google.maps.LatLngBounds()\n    this.infoWindow = new google.maps.InfoWindow()\n\n    this.options.mapOptions.zoom = this.initialZoom\n    this.options.mapOptions.center = this.initialCenter\n\n    var style = cachedStyles[this.options.theme] || null\n\n    if (!this.options.mapOptions.styles) {\n      if (!style) {\n        base.utils.fetch\n        .json(`${base.paths.assets}/features/map/styles/${this.options.theme}.json`)\n        .then((json) => {\n          // cache style\n          cachedStyles[this.options.theme] = json\n          // take styles for map and load it\n          this.options.mapOptions.styles = json\n          this._loadMap()\n        }).catch((ex) => {\n          console.error(`Loading map with theme \"${this.options.theme}\" failed`, ex)\n        })\n      } else {\n        this.options.mapOptions.styles = style\n      }\n    } else {\n      this._loadMap()\n    }\n  }\n\n  destroy() {\n    this.node.innerHTML = ''\n    google.maps.event.clearInstanceListeners(this.map)\n    this.map = null\n\n    super.destroy()\n  }\n\n  _loadMap() {\n    // create a map object and specify the DOM element for display.\n    this.map = new google.maps.Map(this.node, this.options.mapOptions)\n\n    if (this.options.geolocationControl) {\n      this.geolocationControl = new GeolocationControl(this.map, null, (success, position, error) => {\n        if (success) {\n          this.map.setCenter(position)\n          if (this.options.geolocationControlZoom) {\n            this.map.setZoom(this.options.geolocationControlZoom)\n          }\n        } else {\n          error = error.message || error\n          if (error != null) {\n            console.error(`Failed to detect user location: ${error}`)\n          } else {\n            console.error('Failed to detect user location')\n          }\n        }\n      })\n    }\n\n    this.listenerFirstIdle = google.maps.event.addDomListenerOnce(this.map, 'idle', this._firstIdleListener())\n\n    this.options.markers.forEach((marker) => {\n      this.addMarker(marker)\n    })\n\n    this.options.boundMarkers.forEach((marker) => {\n      this.addBoundMarker(marker)\n    })\n\n    this.listenerZoomChanged = google.maps.event.addDomListener(this.map, 'zoom_changed', this._zoomChangedListener())\n    this.listenerDragend = google.maps.event.addDomListener(this.map, 'dragend', this._dragendListener())\n    this.listenerResize = this.addEventListener(window, 'resize', this._resizeListener())\n  }\n\n\n  /**\n   * Adds a marker to the map with a optional info window.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addMarker(options = {}) {\n    var cachedIcon\n    var markerOptions\n    var iconUrl\n\n    // extend Google API marker options\n    markerOptions = Object.assign({}, GoogleMap.defaultMarkerOptions.markerOptions, options.markerOptions || {})\n\n    // extend marker options\n    options = Object.assign({}, GoogleMap.defaultMarkerOptions, options)\n\n    // set map the marker belongs to\n    markerOptions.map = this.map\n\n    // set position to map center position if no position given\n    markerOptions.position = markerOptions.position || this.initialCenter\n\n    // set full icon url\n    iconUrl = `${base.paths.assets}/features/map/pins/${options.pin}.png`\n\n    cachedIcon = cachedIcons[iconUrl] || null\n\n    if (cachedIcon) {\n      markerOptions.anchorPoint = cachedIcon.anchorPoint\n      markerOptions.icon = cachedIcon.icon\n\n      return new Promise((resolve, reject) => {\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      })\n    }\n\n    return new Promise((resolve, reject) => {\n      var image = new Image()\n\n      image.onload = () => {\n        var markerWidth = image.naturalWidth\n        var markerHeight = image.naturalHeight\n        var markerWidthScaled = markerWidth * options.scaleIcon\n        var markerHeightScaled = markerHeight * options.scaleIcon\n\n        markerOptions.anchorPoint = new google.maps.Point(0, markerHeightScaled / -1)\n\n        markerOptions.icon = {}\n        markerOptions.icon.url = iconUrl\n        markerOptions.icon.size = new google.maps.Size(markerWidth, markerHeight)\n        markerOptions.icon.scaledSize = new google.maps.Size(markerWidthScaled, markerHeightScaled)\n        markerOptions.icon.anchor = new google.maps.Point(markerWidthScaled / 2, markerHeightScaled)\n        markerOptions.icon.origin = new google.maps.Point(0, 0)\n\n        // cache icon data\n        cachedIcons[iconUrl] = {\n          anchorPoint: markerOptions.anchorPoint,\n          icon: markerOptions.icon\n        }\n\n        var marker = this._loadMarker(markerOptions, options)\n        resolve(marker)\n      }\n\n      image.src = iconUrl\n    })\n  }\n\n  /**\n   * Adds a marker to the map with its position as boundary.\n   *\n   * @param   {Object} options - The marker options.\n   * @returns {Promise} Resolves when marker has loaded.\n   */\n  addBoundMarker(options = {}) {\n    var markerPromise = this.addMarker(options)\n    return markerPromise.then((marker) => {\n      this.addBound(marker.position)\n    })\n  }\n\n  _loadMarker(markerOptions, options) {\n    var marker = new google.maps.Marker(markerOptions)\n\n    if (options.content) {\n      google.maps.event.addListener(\n        marker, 'click', this._markerClickListener(marker, options.content, options.panTo, options.open)\n      )\n    }\n\n    this.markers.push(marker)\n    return marker\n  }\n\n  /**\n   * Adds a new boundary.\n   * @param {Object} position - The boundary position.\n   */\n  addBound(position) {\n    // extend bounds with new marker position\n    this.bounds.extend(position)\n    // fit map according to current bounds\n    this.map.fitBounds(this.bounds)\n    // update center position\n    this.updateCenter()\n  }\n\n  resize() {\n    // trigger resize\n    google.maps.event.trigger(this.map, 'resize')\n\n    if (this.options.responsive && !this.options.resetOnResize) {\n      // preserve the current center point\n      this.map.setCenter(this.center)\n    }\n\n    if (this.options.resetOnResize) {\n      this.resetCenter(true)\n      this.resetZoom()\n    }\n\n    this.isResizing = false\n    this.trigger('resized')\n  }\n\n  updateCenter() {\n    this.center = this.map.getCenter()\n  }\n\n  setInitialCenter(pos) {\n    this.map.setCenter(pos)\n    this.initialCenter = pos\n  }\n\n  setInitialZoom(zoom) {\n    this.map.setZoom(zoom)\n    this.initialZoom = zoom\n  }\n\n  zoomIn() {\n    this.map.setZoom(++this.map.zoom)\n  }\n\n  zoomOut() {\n    this.map.setZoom(--this.map.zoom)\n  }\n\n  resetCenter(pan = false) {\n    if (pan) {\n      this.map.panTo(this.initialCenter)\n    } else {\n      this.map.setCenter(this.initialCenter)\n    }\n  }\n\n  resetZoom() {\n    this.map.setZoom(this.initialZoom)\n  }\n\n  _firstIdleListener() {\n    return () => {\n      this.trigger('firstIdle')\n    }\n  }\n\n  _markerClickListener(marker, content, pan, open) {\n    if (open) {\n      this.currentMarker = marker\n      this.infoWindow.setContent(content)\n      this.infoWindow.open(this.map, marker)\n    }\n\n    return () => {\n      google.maps.event.addListenerOnce(this.map, 'center_changed', this.updateCenter.bind(this))\n\n      if (this.currentMarker != marker) {\n        this.currentMarker = marker\n        this.infoWindow.setContent(content)\n        this.infoWindow.open(this.map, marker)\n      } else {\n        this.currentMarker = null\n        this.infoWindow.close()\n      }\n\n      if (pan) {\n        var pos = marker.getPosition()\n        this.map.panTo(pos)\n        this.center = pos\n      }\n    }\n  }\n\n  _zoomChangedListener() {\n    return (e) => {\n      this.updateCenter()\n      this.trigger('zoomChanged')\n    }\n  }\n\n  _dragendListener() {\n    return (e) => {\n      this.updateCenter()\n      this.trigger('dragend')\n    }\n  }\n\n  _resizeListener() {\n    return (e) => {\n      if (!this.isResizing) {\n        this.isResizing = true\n        base.utils.fn.rAF(this.resize.bind(this))\n      }\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n *\n * @type {Object}\n * @property {String} theme='default'\n *   Style theme used for map.\n * @property {Boolean} responsive=false\n *   Recenters map on resize.\n * @property {Boolean} resetOnResize=false\n *   Resets map to initial zoom and center on resize.\n * @property {Boolean} geolocationControl=false\n *   Adds a geolocation control.\n * @property {Number|null} geolocationControlZoom=null\n *   Zoom applied after geolocation click.\n * @property {Object} mapOptions\n *   Google Map API options for map instance.\n */\nGoogleMap.defaultOptions = {\n  theme: 'default',\n  markers: [],\n  boundMarkers: [],\n  responsive: true,\n  resetOnResize: false,\n  geolocationControl: false,\n  geolocationControlZoom: null,\n  mapOptions: {\n    zoom: 12,\n    disableDefaultUI: true,\n    scrollwheel: false,\n    zoomControl: true,\n    mapTypeControl: false\n  }\n}\n\nGoogleMap.defaultMarkerOptions = {\n  open: false,\n  content: null,\n  panTo: false,\n  scaleIcon: 0.5,\n  pin: 'default',\n  markerOptions: {\n    draggable: false\n  }\n}\n\nexport default GoogleMap\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}